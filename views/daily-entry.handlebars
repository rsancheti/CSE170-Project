<html>
<head>
	<title>Daily Mood Log</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="../js/jquery-1.11.0.js"></script>


	<style>
		.mood {
			text-align: center;
			padding-top: 60px;
		}

		.pic {
			width: 110px;
			height: 110px;
		}
		.entry {
			text-align: center;
		}



		#text-multi-line {
			padding-bottom: 17px;
			height: 100px;
			width: 100%;
			border: 1px solid #9B9B9B;
		}


		.save{
			text-align: center;
			padding-top: 120px;
		}

		.top-btn {
			padding-top: 20px;
			padding-bottom: 20px;
			font-size: 15px
		}
			h1 {
			  font-family: Roboto;
			  font-size: 32px;
			  font-weight: 600;
			}
			.final-options {
			  margin-top: 36px;
			  margin-bottom: 36px;
			  text-align: center;
			}

			.filled-in {
			  background-color: #33cc99;
			  height: 48px;
			  border-radius: 24px;
			  width: 256px;
			  border: none;
			  color: white;
			  text-align: center;
			  text-decoration: none;
			  display: inline-block;
			  font-family: Roboto;
			  font-size: 16px;
			  font-weight: 500;
			  border-radius: 24px;
			  cursor: pointer;
			  margin-top: 16px;
			  margin-bottom: 16px;
			}
		}
	</style>
</head>

<script>
	function goBack(){
      window.history.back();
    }

  $(document).ready(function(){
	var moodValue = localStorage.getItem('moods');
	var image = "../images/" + moodValue;
	$(".mood").append("<img class='pic' src='" + image +"'/>");;
  });

  function saveData(){
  	/*
  	var data = require('./data.json');	// get the existing JSON file*/
  	const fs = require('fs');
  	var moodVal = localStorage.getItem('moods');	// get the previous stored mood value
  	var commentVal = $("#text-multi-line").val();	// get the daily entry from current page
  	var today = new Date();	// get the mood log date
  	var dd = today.getDate();
  	var mm = today.getMonth()+1;
  	var objectToAdd = { 	// create an object that has four fileds
  		"emoji": moodVal,	
  		"month": mm,
  		"day": dd,
  		"comment": commentVal
  	};
  	/*data.moods.push(objectToAdd);	// push the newly created object to existing JSON data file*/
  	fs.writeFileSync('../data.json', JSON.stringify(objectToAdd));
  	/*
  	localStorage.setItem('comment', commentVal);
  	localStorage.setItem('date', dd);
  	localStorage.setItem('month', mm);*/
  };

</script>
	
<body>
	
	<button class="top-btn" onclick="goBack()" style="float: left"><- Back</button>
	<div class="mood"></div>

	<h1>Describe why you're feeling this way</h1>

	<form id="myForm">
		<div class="entry">
    		<textarea id="text-multi-line" placeholder="2-3 sentences" required></textarea>
		</div>
	</form>

	<div class="final-options">
		<a href="/homePage">
		<button class="filled-in" onclick="saveData()">Finish</button>
		</a>
	</div>

</body>
</html>
